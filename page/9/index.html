<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="This is 284km's diary.">
    <title>Drafts</title>
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.1/css/foundation.min.css">
    <link href="http://coderwall.com/stylesheets/jquery.coderwall.css" media="all" rel="stylesheet" type="text/css"></link>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
  </head>
  <body>

    <!-- Nav Bar -->
    <div class="row">
      <div class="large-12 columns">
        <div class="nav-bar right">
          <ul class="button-group">
            <li><a href="http://zombieness.net:5000/chat" class="button">Chat</a></li>
            <li><a href="#" class="button">Memo</a></li>
          </ul>
        </div>
        <h1>Drafts <small>as my diary.</small></h1>
        <hr>
      </div>
    </div>
    <!-- End Nav -->

    <!-- Main Page Content and Sidebar -->
    <div class="row">

      <!-- Main Blog Content -->
      <div id="main" class="large-9 columns" role="main">
          <p>Page 9 of 11</p>

  
    <p><a class="button" href="/page/8/">Previous page</a></p>
  

  <article>
  <h3><a href="/2013/12/04/TweetViaBrowser.html">Twitter via tweet button</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>ボタンを押してツイートするだけの用途です。</p>

<p>事前に書きたいことをメモしたい時もあるので、textarea をボタン下に配置しています。</p>

<p><code>data-text="xxx"</code> でボタン押下後のデフォルトメッセージを設定しておけます。</p>

<p><code>data-hashtag="xxx"</code> で同じくボタン押下後のデフォルトハッシュタグを設定しておけます。</p>

<p>tweet_button.html</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;tweet_button&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;a href="https://twitter.com/share" class="twitter-share-button" data-count="none" data-text="write here" data-hashtags="now_working"&gt;tweet&lt;/a&gt;
&lt;br&gt;&lt;textarea cols=40 rows=5&gt;&lt;/textarea&gt;
&lt;script&gt;
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>


    </div>
  </div>
  <br>
  <h6><a href="/2013/12/04/TweetViaBrowser.html">Published at December 04, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/12/03/AutoEisuInTerminalVim.html">[Esc, C-[, C-C 対応版] Terminal Vimで Insert モードを抜ける時に英数入力に切り替える方法</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>Mac の場合です。</p>

<h3 id="section">解決方法</h3>

<p>KeyRemap4MacBook を使えば可能。</p>

<ul>
  <li>ESC と Ctrl+C と Ctrl+[ に対応させる設定</li>
</ul>

<p>private.xml</p>

<pre><code>&lt;?xml version="1.0"?&gt;
&lt;root&gt;
  &lt;list&gt;
    &lt;item&gt;
      &lt;name&gt;LeaveInsMode with EISUU(Terminal)&lt;/name&gt;
      &lt;identifier&gt;private.app_terminal_esc_with_eisuu&lt;/identifier&gt;
      &lt;only&gt;TERMINAL&lt;/only&gt;
      &lt;autogen&gt;--KeyToKey-- KeyCode::ESCAPE, KeyCode::ESCAPE, KeyCode::JIS_EISUU&lt;/autogen&gt;
      &lt;autogen&gt;--KeyToKey-- KeyCode::BRACKET_LEFT, VK_CONTROL, KeyCode::BRACKET_LEFT, VK_CONTROL, KeyCode::JIS_EISUU&lt;/autogen&gt;
      &lt;autogen&gt;--KeyToKey-- KeyCode::C, VK_CONTROL, KeyCode::C, VK_CONTROL, KeyCode::JIS_EISUU&lt;/autogen&gt;
    &lt;/item&gt;
  &lt;/list&gt;
&lt;/root&gt;
</code></pre>

<p>あとは ReloadXML して checkbox ON して有効にましょう。そしたらOK。</p>

    </div>
  </div>
  <br>
  <h6><a href="/2013/12/03/AutoEisuInTerminalVim.html">Published at December 03, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/09/07/strtok.html">strtok()</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>strtok() が static なデータを保持するから、</p>

<p>どこか他で、意図せずstrtok()してることに気づかなかったら痛い想いする。</p>

<pre><code>char *p;
p = strtok("aaa,bbb,ccc", ",");
printf("%s\n", p); /* aaa */
p = strtok(NULL, ",");
printf("%s\n", p); /* bbb */
p = strtok(NULL, ",");
printf("%s\n", p); /* ccc */
</code></pre>


    </div>
  </div>
  <br>
  <h6><a href="/2013/09/07/strtok.html">Published at September 07, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/08/30/VimCalc.html">vim で計算</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>C-r= で計算できるのか 知らなかった。便利。</p>


    </div>
  </div>
  <br>
  <h6><a href="/2013/08/30/VimCalc.html">Published at August 30, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/08/16/MisteryIE.html">IE の不思議 その１ getElementsByName</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>なぜ IE だけこんな挙動なのか?
getElementsByName() で、IE だけ拾えてないのなんでだろうと思っていたら、name で拾ってくるらしい。
だからこれはダメ</p>

<pre><code>&lt;input type="file" name="idfile" multiple&gt;
</code></pre>

<p>これなら大丈夫</p>

<pre><code>&lt;input type="file" id="idfile" name="idfile" multiple&gt;
</code></pre>

<p>javascript も同様</p>

<pre><code>var newFile = document.createElement("input");
newFile.type = "file";
newFile.setAttribute("name", "idfile");
newFile.setAttribute("id", "idfile");
newFile.setAttribute("multiple");
var div = document.getElementById('iddiv');
div.appendChild(newFile);
</code></pre>


    </div>
  </div>
  <br>
  <h6><a href="/2013/08/16/MisteryIE.html">Published at August 16, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/08/16/JavaInputTypeFileUpload.html">Java で input type="file" アップロード</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p><code>input type="file"</code> のファイルをアップロードする時、java だと org.apache.commons.fileupload.servlet.ServletFileUpload とか使うと思います。</p>

<p>以下の具合に、 getName() の取得結果が IE だけ違ったので少し悲しくなりました。</p>

<ul>
  <li>chrome, firefox はファイル名だけ取得</li>
  <li>IE はフルパス取得</li>
</ul>

<blockquote>
  <p><input type="file" id="files" name="files" /></p>
</blockquote>

<pre><code>ServletFileUpload upload = new ServletFileUpload(factory);
upload.setSizeMax(-1);
List&lt;?&gt; items = upload.parseRequest(request);
for (Object val : items) {
  FileItem item = (FileItem) val;

  // IE だけフルパスで取れるんだけど、、、
  // chrome, firefox はファイル名のみ
  String fileName = item.getName();

  if (!item.isFormField()) {
    if ((fileName != null) &amp;&amp; (!fileName.equals(""))) {

      // IE の場合 ファイル名だけ抜き出すなど
      Integer ie = fileName.lastIndexOf("\\");
      if (ie &gt; 0) {
        fileName = fileName.substring(ie);
      }

      item.write(new File(upDir + "/" + fileName));
    }
  }
}
</code></pre>


    </div>
  </div>
  <br>
  <h6><a href="/2013/08/16/JavaInputTypeFileUpload.html">Published at August 16, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/08/04/Jenkins.html">Jenkinsを導入しよう</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>Jenkins導入に億劫になっている人は、導入だけならすごく簡単にできるので、10分の時間を確保して、以下を行うべし。</p>

<p>Mac環境での説明です。</p>

<ul>
  <li>
    <p>インストールする</p>

    <p>brew install jenkins</p>
  </li>
  <li>
    <p>とりあえず動かしたいよね</p>

    <p>java -jar /usr/local/opt/jenkins/libexec/jenkins.war</p>
  </li>
</ul>

<p>http://localhost:8080/ にアクセスしましょう。</p>

<ul>
  <li>簡単に使ってみましょう。</li>
</ul>

<p>New Job から Job name を入力し、Build a free-style software project を選択して OKします。</p>

<p>Add build step から、 Execute shell を選択して、echo "test!!!" とか入力して save します。</p>

<p>Dashboard から、作成されたプロジェクトを選択して、 Build Now してみましょう。</p>

<p>結果は Build History から確認できます。</p>

<p>Console Output から、出力を確認することが出来ましたね！！！</p>

<p>プロジェクトの削除は、プロジェクトを選択して Delete Project で消えます。</p>


    </div>
  </div>
  <br>
  <h6><a href="/2013/08/04/Jenkins.html">Published at August 04, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/07/27/TmuxE353NothingInRegister.html">tmux の vim で E353 Nothing in register とか出る時</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <pre><code>brew install reattach-to-user-namespace
</code></pre>

<p>して、.tmux.conf に以下を書いて、</p>

<blockquote>
  <p>set-option -g default-command "reattach-to-user-namespace -l zsh"</p>
</blockquote>

<p>あとは</p>

<pre><code>tmux kill-server
</code></pre>

<p>とかすればOK</p>

    </div>
  </div>
  <br>
  <h6><a href="/2013/07/27/TmuxE353NothingInRegister.html">Published at July 27, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/07/19/Nginx.html">VPS(CentOS6.4) に nginx1.4.2 をいれた時のメモ</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <pre><code>sudo rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-60.el6.ngx.noarch.rpm
</code></pre>

<p>/etc/yum.repos.d/nginx.repo</p>

<blockquote>
  <p>[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/6/$basearch/
gpgcheck=0
enabled=1</p>
</blockquote>

<pre><code>sudo yum install nginx
sudo service nginx start
</code></pre>

<p>http://vps/ とかで確認。</p>

<p>/usr/share/nginx/html/index.html が表示されるはず。</p>


    </div>
  </div>
  <br>
  <h6><a href="/2013/07/19/Nginx.html">Published at July 19, 2013.</a></h6>
  </article>
  <hr>
  <article>
  <h3><a href="/2013/07/13/SakuranoVPS.html">setting of Sakura VPS</a></h3>
  <!-- use article.summary(250) if you have Nokogiri available to show just
  the first 250 characters -->
  <div class="row">
    <div class="large-6 columns">
      <p>さくらのVPSでの初期設定</p>

<p>yum update</p>

<p>必要なら root の password 変更</p>

<p>passwd</p>

<p>useradd username</p>

<p>passwd username</p>

<p>usermod -G wheel username</p>

<p>vi /etc/pam.d/su</p>

<p>uncomment</p>

<p>auth required pam_wheel.so use_uid</p>

<p>visudo</p>

<p>無い場合は入れる。 yum install sudo</p>

<p>uncomment</p>

<p>%wheel ALL=(ALL) ALL</p>

<p>こっちも uncomment すると pass 入れる必要なくなる。</p>

<p>%wheel ALL=(ALL) NOPASSWD: ALL</p>

<p>re-login as added user</p>

<p>vi ~/.bash_profile</p>

<p>zsh なら .zshrc とかに書く。</p>

<p>PATH=$PATH:$HOME/bin</p>

<p>add the following</p>

<p>PATH=$PATH:/sbin</p>

<p>PATH=$PATH:/usr/sbin</p>

<p>PATH=$PATH:/usr/local/sbin</p>

<p>聞かれる filename pass</p>

<p>ssh-keygen -t rsa -C "your mail address"</p>

<p>そういえば hosts でも書いておく</p>

<p>xxx.xxx.xxx.xxx vps</p>

<p>sftp username@vps</p>

<p>put id_rsa.pub</p>

<p>mkdir ~/.ssh</p>

<dl>
  <dt>cd ~/.ssh</dt>
  <dd>
    <blockquote>
      <p>authorized_keys</p>
    </blockquote>
  </dd>
</dl>

<p>cat ~/id_rsa.pub » ~/.ssh/authorized_keys</p>

<p>rm ~/id_rsa.pub</p>

<p>chmod 700 ~/.ssh</p>

<p>chmod 600 ~/.ssh/authorized_keys</p>

<p>sudo vi /etc/ssh/sshd_config</p>

<p>uncomment</p>

<p>PermitEmptyPasswords no</p>

<p>RhostsRSAAuthentication no</p>

<p>RSAAuthentication yes</p>

<p>PubkeyAuthentication yes</p>

<p>AuthorizedKeysFile .ssh/authorized_keys</p>

<p>PasswordAuthentication yes</p>

<p>PasswordAuthentication no</p>

<p>Port 22</p>

<p>Port 10022</p>

<p>sudo /etc/init.d/sshd restart</p>

<p>ssh vps -i ~/.ssh/id_rsa -lusername -p10022</p>


    </div>
  </div>
  <br>
  <h6><a href="/2013/07/13/SakuranoVPS.html">Published at July 13, 2013.</a></h6>
  </article>
  <hr>

  
    <p><a class="button" href="/page/10/">Next page</a></p>
  

      </div>
      <!-- End Main Content -->

      <!-- Sidebar -->
      <aside class="large-3 columns">

      <h4>Recent Entries</h4>
      <ul>
        
          <li><a href="/2014/12/18/PtOnlineSchemaChange.html">pt-online-schema-change</a> <span>Dec 18</span></li>
        
          <li><a href="/2014/12/05/UrlEncodeWithPLUS.html">URL エンコードの + と %20 などの挙動でハマったこと</a> <span>Dec 05</span></li>
        
          <li><a href="/2014/11/25/Emmet.html">Emmet を導入してみた</a> <span>Nov 25</span></li>
        
          <li><a href="/2014/11/07/RackAcceptDefault.html">rack-accept-default から知ったこと</a> <span>Nov 07</span></li>
        
          <li><a href="/2014/10/27/RSpecMinimal.html">rspec の最小構成</a> <span>Oct 27</span></li>
        
          <li><a href="/2014/10/27/MakeBookmarkletFaster.html">Make bookmarklet faster</a> <span>Oct 27</span></li>
        
          <li><a href="/2014/10/22/Rails4NonStupidDigestAssets.html">Rails4 の assets precompile に関する注意点と現時点での対応方法</a> <span>Oct 22</span></li>
        
          <li><a href="/2014/10/02/StopTail.html">tail -f を一時的に止める</a> <span>Oct 02</span></li>
        
          <li><a href="/2014/09/30/Book.html">技術書の選び方を相談されて考えたこと</a> <span>Sep 30</span></li>
        
          <li><a href="/2014/09/29/WhereIsMyCnf.html">where is my.cnf</a> <span>Sep 29</span></li>
        
      </ul>

      <a class="twitter-timeline" href="https://twitter.com/284km" data-widget-id="458815336611999744">@284km からのツイート</a>

      <h4>Categories</h4>
      <ul>
        
          <li><a href="/tags/tool.html">tool</a> (3)</a></li>
        
          <li><a href="/tags/iterm.html">iterm</a> (1)</a></li>
        
          <li><a href="/tags/diary.html">diary</a> (20)</a></li>
        
          <li><a href="/tags/github.html">github</a> (1)</a></li>
        
          <li><a href="/tags/php.html">php</a> (1)</a></li>
        
          <li><a href="/tags/blog.html">blog</a> (3)</a></li>
        
          <li><a href="/tags/windows.html">windows</a> (5)</a></li>
        
          <li><a href="/tags/android.html">android</a> (4)</a></li>
        
          <li><a href="/tags/javascript.html">javascript</a> (6)</a></li>
        
          <li><a href="/tags/css.html">css</a> (3)</a></li>
        
          <li><a href="/tags/bestpractice.html">bestpractice</a> (3)</a></li>
        
          <li><a href="/tags/eclipse.html">eclipse</a> (1)</a></li>
        
          <li><a href="/tags/chrome.html">chrome</a> (3)</a></li>
        
          <li><a href="/tags/indexeddb.html">indexeddb</a> (1)</a></li>
        
          <li><a href="/tags/example.html">example</a> (1)</a></li>
        
          <li><a href="/tags/ruby.html">ruby</a> (6)</a></li>
        
          <li><a href="/tags/postgresql.html">postgresql</a> (1)</a></li>
        
          <li><a href="/tags/vps.html">vps</a> (2)</a></li>
        
          <li><a href="/tags/nginx.html">nginx</a> (1)</a></li>
        
          <li><a href="/tags/vim.html">vim</a> (2)</a></li>
        
          <li><a href="/tags/backbone.html">backbone</a> (1)</a></li>
        
          <li><a href="/tags/rails.html">rails</a> (6)</a></li>
        
          <li><a href="/tags/rails4.html">rails4</a> (1)</a></li>
        
          <li><a href="/tags/ubuntu.html">ubuntu</a> (6)</a></li>
        
          <li><a href="/tags/git.html">git</a> (3)</a></li>
        
          <li><a href="/tags/middleman.html">middleman</a> (1)</a></li>
        
          <li><a href="/tags/mysql.html">mysql</a> (4)</a></li>
        
          <li><a href="/tags/ibus.html">ibus</a> (1)</a></li>
        
          <li><a href="/tags/c.html">c</a> (2)</a></li>
        
          <li><a href="/tags/java.html">java</a> (4)</a></li>
        
          <li><a href="/tags/json.html">json</a> (1)</a></li>
        
          <li><a href="/tags/intellij.html">intellij</a> (1)</a></li>
        
          <li><a href="/tags/vagrant.html">vagrant</a> (4)</a></li>
        
          <li><a href="/tags/ie.html">ie</a> (2)</a></li>
        
          <li><a href="/tags/jenkins.html">jenkins</a> (1)</a></li>
        
          <li><a href="/tags/english.html">english</a> (2)</a></li>
        
          <li><a href="/tags/virtualbox.html">virtualbox</a> (1)</a></li>
        
          <li><a href="/tags/turbolinks.html">turbolinks</a> (1)</a></li>
        
          <li><a href="/tags/mruby.html">mruby</a> (1)</a></li>
        
          <li><a href="/tags/linux.html">linux</a> (1)</a></li>
        
          <li><a href="/tags/js.html">js</a> (1)</a></li>
        
          <li><a href="/tags/engineer.html">engineer</a> (1)</a></li>
        
          <li><a href="/tags/twitter.html">twitter</a> (2)</a></li>
        
          <li><a href="/tags/jquery.html">jquery</a> (1)</a></li>
        
          <li><a href="/tags/golang.html">golang</a> (1)</a></li>
        
          <li><a href="/tags/environment.html">environment</a> (1)</a></li>
        
          <li><a href="/tags/rspec.html">rspec</a> (1)</a></li>
        
          <li><a href="/tags/perl.html">perl</a> (2)</a></li>
        
          <li><a href="/tags/web.html">web</a> (1)</a></li>
        
          <li><a href="/tags/tmux.html">tmux</a> (1)</a></li>
        
          <li><a href="/tags/toeic.html">toeic</a> (1)</a></li>
        
          <li><a href="/tags/ios.html">ios</a> (5)</a></li>
        
          <li><a href="/tags/xcode.html">xcode</a> (1)</a></li>
        
          <li><a href="/tags/html.html">html</a> (1)</a></li>
        
          <li><a href="/tags/pt-pnline-schema-change.html">pt-pnline-schema-change</a> (1)</a></li>
        
          <li><a href="/tags/sh.html">sh</a> (1)</a></li>
        
          <li><a href="/tags/product.html">product</a> (1)</a></li>
        
          <li><a href="/tags/compass.html">compass</a> (1)</a></li>
        
          <li><a href="/tags/redis.html">redis</a> (1)</a></li>
        
      </ul>
      <h4>By Year</h4>
      <ul>
        
          <li><a href="/2014.html">2014</a> (73)</a></li>
        
          <li><a href="/2013.html">2013</a> (32)</a></li>
        
          <li><a href="/2012.html">2012</a> (2)</a></li>
        
      </ul>

      <div class="panel">
        <h5>Featured</h5>
        <p> - The status of my iOS app is "Waiting For Review" now.</p>
      </div>

      <section class="coderwall" data-coderwall-username="284km" data-coderwall-orientation="horizontal"></section>

      </aside>
      <!-- End Sidebar -->

    </div>
    <!-- End Main Content and Sidebar -->

    <!-- Footer -->
    <footer class="row">
    <div class="large-12 columns">
      <hr>
      <div class="row">
        <div class="large-6 columns">
          <p>Kazuma Furuhashi @284km</p>
        </div>
        <div class="large-6 columns">
          <ul class="inline-list right">
            <li><a href="http://zombieness.net:5000/chat" class="button">Chat</a></li>
            <li><a href="#" class="button">Memo</a></li>
          </ul>
        </div>
      </div>
    </div>
    </footer>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/foundation/5.2.1/js/foundation.min.js"></script>
    <script src="http://coderwall.com/javascripts/jquery.coderwall.js">
    <script>
      $(document).foundation();
      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
    </script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  </body>
</html>
