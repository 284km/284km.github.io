---
title: URL エンコードの + と %20 などの挙動でハマったこと
date: 2014-12-05 12:43
tags: web
---

api 叩いて、そのクエリパラメータとDBの値を突き合わせてどうのこうの、ということをしていて、
あれー、一致するはずがなんかおかしいぞ。ということになっていた。

最近譲り受けてメンテすることになったコードでわからんので、コードを追っていく。

どうやらパラメータに "+" が混ざっていたことで起きていた。
サーバ側で文字列を突き合わせているが、"+" が半角スペース扱いされてしまっている。

なるほど url encode のよくあるアレだ。
とりあえず今すぐに、すぐさま動かすことが命題であったので、String.gsub(" ", "+") で難を逃れた。

